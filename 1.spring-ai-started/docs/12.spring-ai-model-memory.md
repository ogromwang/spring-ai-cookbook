# 聊天记忆

聊天记忆（Chat Memory）用于管理多轮对话的上下文，确保 AI 能够记住之前的对话内容。

::: code-group

```java [java:基本用法]
@Autowired
private ChatModel chatModel;

// 创建聊天记忆
InMemoryChatMemory chatMemory = new InMemoryChatMemory();

// 添加对话历史
chatMemory.add(new UserMessage("我的名字是张三"));
chatMemory.add(new AssistantMessage("你好，张三！"));

// 使用记忆进行对话
ChatResponse response = chatModel.call(
    new Prompt(chatMemory.getMessages(), "请记住我的名字")
);
```

```yaml [yaml:JDBC 持久化配置]
spring:
  ai:
    chat:
      memory:
        repository:
          jdbc:
            initialize-schema: always
```

```java [java:JDBC 持久化记忆]
@Autowired
private JdbcChatMemoryStore memoryStore;

// 创建带持久化的记忆
ChatMemory chatMemory = new PersistentChatMemory(
    memoryStore, 
    "conversation-id-123"
);
```

:::

## 参考文档

- [Spring AI Chat Memory 官方文档](https://docs.spring.io/spring-ai/reference/api/chat-memory.html)

## 继续深入

- [[12.spring-ai-model-memory/index|聊天记忆]]

---
